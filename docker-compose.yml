version: "3.7"

services:
  dp-apache:
    build: 
      context: ./conf/apache
    image: dp-apache-ssl:1.0
    container_name: dp-apache
    environment:
      - SERVER_NAME=${SSL_DOMAIN}
    ports:
      - "${UNSECURE_HOST_PORT}:80"
      - "${SECURE_HOST_PORT}:443"
    volumes: 
      - ${APP_DIR}:/usr/local/apache2/htdocs

  dp-php:
    build:
      context: ./conf/php
    image: dp-php7.4-fpm:1.0
    container_name: dp-php7.4-fpm
    ports:
      - "${XDEBUG_HOST_PORT}:9005"
    volumes:
      - "${APP_DIR}:"
